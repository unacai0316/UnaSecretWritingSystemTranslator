{"ast":null,"code":"var WriteError = require('level-errors').WriteError;\nvar promisify = require('./promisify');\nvar getCallback = require('./common').getCallback;\nvar getOptions = require('./common').getOptions;\nfunction Batch(levelup) {\n  // TODO (next major): remove this._levelup alias\n  this.db = this._levelup = levelup;\n  this.batch = levelup.db.batch();\n  this.ops = [];\n  this.length = 0;\n}\nBatch.prototype.put = function (key, value) {\n  try {\n    this.batch.put(key, value);\n  } catch (e) {\n    throw new WriteError(e);\n  }\n  this.ops.push({\n    type: 'put',\n    key: key,\n    value: value\n  });\n  this.length++;\n  return this;\n};\nBatch.prototype.del = function (key) {\n  try {\n    this.batch.del(key);\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  this.ops.push({\n    type: 'del',\n    key: key\n  });\n  this.length++;\n  return this;\n};\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear();\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  this.ops = [];\n  this.length = 0;\n  return this;\n};\nBatch.prototype.write = function (options, callback) {\n  var levelup = this._levelup;\n  var ops = this.ops;\n  var promise;\n  callback = getCallback(options, callback);\n  if (!callback) {\n    callback = promisify();\n    promise = callback.promise;\n  }\n  options = getOptions(options);\n  try {\n    this.batch.write(options, function (err) {\n      if (err) {\n        return callback(new WriteError(err));\n      }\n      levelup.emit('batch', ops);\n      callback();\n    });\n  } catch (err) {\n    throw new WriteError(err);\n  }\n  return promise;\n};\nmodule.exports = Batch;","map":{"version":3,"names":["WriteError","require","promisify","getCallback","getOptions","Batch","levelup","db","_levelup","batch","ops","length","prototype","put","key","value","e","push","type","del","err","clear","write","options","callback","promise","emit","module","exports"],"sources":["/Users/tsaiyunzhen/my-react-app/my-app/node_modules/levelup/lib/batch.js"],"sourcesContent":["var WriteError = require('level-errors').WriteError\nvar promisify = require('./promisify')\nvar getCallback = require('./common').getCallback\nvar getOptions = require('./common').getOptions\n\nfunction Batch (levelup) {\n  // TODO (next major): remove this._levelup alias\n  this.db = this._levelup = levelup\n  this.batch = levelup.db.batch()\n  this.ops = []\n  this.length = 0\n}\n\nBatch.prototype.put = function (key, value) {\n  try {\n    this.batch.put(key, value)\n  } catch (e) {\n    throw new WriteError(e)\n  }\n\n  this.ops.push({ type: 'put', key: key, value: value })\n  this.length++\n\n  return this\n}\n\nBatch.prototype.del = function (key) {\n  try {\n    this.batch.del(key)\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops.push({ type: 'del', key: key })\n  this.length++\n\n  return this\n}\n\nBatch.prototype.clear = function () {\n  try {\n    this.batch.clear()\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  this.ops = []\n  this.length = 0\n\n  return this\n}\n\nBatch.prototype.write = function (options, callback) {\n  var levelup = this._levelup\n  var ops = this.ops\n  var promise\n\n  callback = getCallback(options, callback)\n\n  if (!callback) {\n    callback = promisify()\n    promise = callback.promise\n  }\n\n  options = getOptions(options)\n\n  try {\n    this.batch.write(options, function (err) {\n      if (err) { return callback(new WriteError(err)) }\n      levelup.emit('batch', ops)\n      callback()\n    })\n  } catch (err) {\n    throw new WriteError(err)\n  }\n\n  return promise\n}\n\nmodule.exports = Batch\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}