{"ast":null,"code":"var varint = require('varint');\nvar stream = require('readable-stream');\nvar inherits = require('inherits');\nvar pool = Buffer.allocUnsafe(10 * 1024);\nvar used = 0;\nvar Encoder = function () {\n  if (!(this instanceof Encoder)) return new Encoder();\n  stream.Transform.call(this);\n  this._destroyed = false;\n};\ninherits(Encoder, stream.Transform);\nEncoder.prototype._transform = function (data, enc, cb) {\n  if (this._destroyed) return cb();\n  varint.encode(data.length, pool, used);\n  used += varint.encode.bytes;\n  this.push(pool.slice(used - varint.encode.bytes, used));\n  this.push(data);\n  if (pool.length - used < 100) {\n    pool = Buffer.allocUnsafe(10 * 1024);\n    used = 0;\n  }\n  cb();\n};\nEncoder.prototype.destroy = function (err) {\n  if (this._destroyed) return;\n  this._destroyed = true;\n  if (err) this.emit('error', err);\n  this.emit('close');\n};\nmodule.exports = Encoder;","map":{"version":3,"names":["varint","require","stream","inherits","pool","Buffer","allocUnsafe","used","Encoder","Transform","call","_destroyed","prototype","_transform","data","enc","cb","encode","length","bytes","push","slice","destroy","err","emit","module","exports"],"sources":["/Users/tsaiyunzhen/my-react-app/my-app/node_modules/length-prefixed-stream/encode.js"],"sourcesContent":["var varint = require('varint')\nvar stream = require('readable-stream')\nvar inherits = require('inherits')\n\nvar pool = Buffer.allocUnsafe(10 * 1024)\nvar used = 0\n\nvar Encoder = function () {\n  if (!(this instanceof Encoder)) return new Encoder()\n  stream.Transform.call(this)\n  this._destroyed = false\n}\n\ninherits(Encoder, stream.Transform)\n\nEncoder.prototype._transform = function (data, enc, cb) {\n  if (this._destroyed) return cb()\n\n  varint.encode(data.length, pool, used)\n  used += varint.encode.bytes\n\n  this.push(pool.slice(used - varint.encode.bytes, used))\n  this.push(data)\n\n  if (pool.length - used < 100) {\n    pool = Buffer.allocUnsafe(10 * 1024)\n    used = 0\n  }\n\n  cb()\n}\n\nEncoder.prototype.destroy = function (err) {\n  if (this._destroyed) return\n  this._destroyed = true\n  if (err) this.emit('error', err)\n  this.emit('close')\n}\n\nmodule.exports = Encoder\n"],"mappings":"AAAA,IAAIA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC9B,IAAIC,MAAM,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AACvC,IAAIE,QAAQ,GAAGF,OAAO,CAAC,UAAU,CAAC;AAElC,IAAIG,IAAI,GAAGC,MAAM,CAACC,WAAW,CAAC,EAAE,GAAG,IAAI,CAAC;AACxC,IAAIC,IAAI,GAAG,CAAC;AAEZ,IAAIC,OAAO,GAAG,SAAAA,CAAA,EAAY;EACxB,IAAI,EAAE,IAAI,YAAYA,OAAO,CAAC,EAAE,OAAO,IAAIA,OAAO,CAAC,CAAC;EACpDN,MAAM,CAACO,SAAS,CAACC,IAAI,CAAC,IAAI,CAAC;EAC3B,IAAI,CAACC,UAAU,GAAG,KAAK;AACzB,CAAC;AAEDR,QAAQ,CAACK,OAAO,EAAEN,MAAM,CAACO,SAAS,CAAC;AAEnCD,OAAO,CAACI,SAAS,CAACC,UAAU,GAAG,UAAUC,IAAI,EAAEC,GAAG,EAAEC,EAAE,EAAE;EACtD,IAAI,IAAI,CAACL,UAAU,EAAE,OAAOK,EAAE,CAAC,CAAC;EAEhChB,MAAM,CAACiB,MAAM,CAACH,IAAI,CAACI,MAAM,EAAEd,IAAI,EAAEG,IAAI,CAAC;EACtCA,IAAI,IAAIP,MAAM,CAACiB,MAAM,CAACE,KAAK;EAE3B,IAAI,CAACC,IAAI,CAAChB,IAAI,CAACiB,KAAK,CAACd,IAAI,GAAGP,MAAM,CAACiB,MAAM,CAACE,KAAK,EAAEZ,IAAI,CAAC,CAAC;EACvD,IAAI,CAACa,IAAI,CAACN,IAAI,CAAC;EAEf,IAAIV,IAAI,CAACc,MAAM,GAAGX,IAAI,GAAG,GAAG,EAAE;IAC5BH,IAAI,GAAGC,MAAM,CAACC,WAAW,CAAC,EAAE,GAAG,IAAI,CAAC;IACpCC,IAAI,GAAG,CAAC;EACV;EAEAS,EAAE,CAAC,CAAC;AACN,CAAC;AAEDR,OAAO,CAACI,SAAS,CAACU,OAAO,GAAG,UAAUC,GAAG,EAAE;EACzC,IAAI,IAAI,CAACZ,UAAU,EAAE;EACrB,IAAI,CAACA,UAAU,GAAG,IAAI;EACtB,IAAIY,GAAG,EAAE,IAAI,CAACC,IAAI,CAAC,OAAO,EAAED,GAAG,CAAC;EAChC,IAAI,CAACC,IAAI,CAAC,OAAO,CAAC;AACpB,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGlB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}