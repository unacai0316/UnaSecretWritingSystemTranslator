{"ast":null,"code":"var AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN;\nvar inherits = require('inherits');\nvar DeferredIterator = require('./deferred-iterator');\nvar deferrables = 'put get del batch clear'.split(' ');\nvar optionalDeferrables = 'approximateSize compactRange'.split(' ');\nfunction DeferredLevelDOWN(db) {\n  AbstractLevelDOWN.call(this, db.supports || {});\n\n  // TODO (future major): remove this fallback; db must have manifest that\n  // declares approximateSize and compactRange in additionalMethods.\n  optionalDeferrables.forEach(function (m) {\n    if (typeof db[m] === 'function' && !this.supports.additionalMethods[m]) {\n      this.supports.additionalMethods[m] = true;\n    }\n  }, this);\n  this._db = db;\n  this._operations = [];\n  closed(this);\n}\ninherits(DeferredLevelDOWN, AbstractLevelDOWN);\nDeferredLevelDOWN.prototype.type = 'deferred-leveldown';\nDeferredLevelDOWN.prototype._open = function (options, callback) {\n  var self = this;\n  this._db.open(options, function (err) {\n    if (err) return callback(err);\n    self._operations.forEach(function (op) {\n      if (op.iterator) {\n        op.iterator.setDb(self._db);\n      } else {\n        self._db[op.method].apply(self._db, op.args);\n      }\n    });\n    self._operations = [];\n    open(self);\n    callback();\n  });\n};\nDeferredLevelDOWN.prototype._close = function (callback) {\n  var self = this;\n  this._db.close(function (err) {\n    if (err) return callback(err);\n    closed(self);\n    callback();\n  });\n};\nfunction open(self) {\n  deferrables.concat('iterator').forEach(function (m) {\n    self['_' + m] = function () {\n      return this._db[m].apply(this._db, arguments);\n    };\n  });\n  Object.keys(self.supports.additionalMethods).forEach(function (m) {\n    self[m] = function () {\n      return this._db[m].apply(this._db, arguments);\n    };\n  });\n}\nfunction closed(self) {\n  deferrables.forEach(function (m) {\n    self['_' + m] = function () {\n      this._operations.push({\n        method: m,\n        args: arguments\n      });\n    };\n  });\n  Object.keys(self.supports.additionalMethods).forEach(function (m) {\n    self[m] = function () {\n      this._operations.push({\n        method: m,\n        args: arguments\n      });\n    };\n  });\n  self._iterator = function (options) {\n    var it = new DeferredIterator(self, options);\n    this._operations.push({\n      iterator: it\n    });\n    return it;\n  };\n}\nDeferredLevelDOWN.prototype._serializeKey = function (key) {\n  return key;\n};\nDeferredLevelDOWN.prototype._serializeValue = function (value) {\n  return value;\n};\nmodule.exports = DeferredLevelDOWN;\nmodule.exports.DeferredIterator = DeferredIterator;","map":{"version":3,"names":["AbstractLevelDOWN","require","inherits","DeferredIterator","deferrables","split","optionalDeferrables","DeferredLevelDOWN","db","call","supports","forEach","m","additionalMethods","_db","_operations","closed","prototype","type","_open","options","callback","self","open","err","op","iterator","setDb","method","apply","args","_close","close","concat","arguments","Object","keys","push","_iterator","it","_serializeKey","key","_serializeValue","value","module","exports"],"sources":["/Users/tsaiyunzhen/my-react-app/my-app/node_modules/deferred-leveldown/deferred-leveldown.js"],"sourcesContent":["var AbstractLevelDOWN = require('abstract-leveldown').AbstractLevelDOWN\nvar inherits = require('inherits')\nvar DeferredIterator = require('./deferred-iterator')\nvar deferrables = 'put get del batch clear'.split(' ')\nvar optionalDeferrables = 'approximateSize compactRange'.split(' ')\n\nfunction DeferredLevelDOWN (db) {\n  AbstractLevelDOWN.call(this, db.supports || {})\n\n  // TODO (future major): remove this fallback; db must have manifest that\n  // declares approximateSize and compactRange in additionalMethods.\n  optionalDeferrables.forEach(function (m) {\n    if (typeof db[m] === 'function' && !this.supports.additionalMethods[m]) {\n      this.supports.additionalMethods[m] = true\n    }\n  }, this)\n\n  this._db = db\n  this._operations = []\n  closed(this)\n}\n\ninherits(DeferredLevelDOWN, AbstractLevelDOWN)\n\nDeferredLevelDOWN.prototype.type = 'deferred-leveldown'\n\nDeferredLevelDOWN.prototype._open = function (options, callback) {\n  var self = this\n\n  this._db.open(options, function (err) {\n    if (err) return callback(err)\n\n    self._operations.forEach(function (op) {\n      if (op.iterator) {\n        op.iterator.setDb(self._db)\n      } else {\n        self._db[op.method].apply(self._db, op.args)\n      }\n    })\n    self._operations = []\n\n    open(self)\n    callback()\n  })\n}\n\nDeferredLevelDOWN.prototype._close = function (callback) {\n  var self = this\n\n  this._db.close(function (err) {\n    if (err) return callback(err)\n    closed(self)\n    callback()\n  })\n}\n\nfunction open (self) {\n  deferrables.concat('iterator').forEach(function (m) {\n    self['_' + m] = function () {\n      return this._db[m].apply(this._db, arguments)\n    }\n  })\n  Object.keys(self.supports.additionalMethods).forEach(function (m) {\n    self[m] = function () {\n      return this._db[m].apply(this._db, arguments)\n    }\n  })\n}\n\nfunction closed (self) {\n  deferrables.forEach(function (m) {\n    self['_' + m] = function () {\n      this._operations.push({ method: m, args: arguments })\n    }\n  })\n  Object.keys(self.supports.additionalMethods).forEach(function (m) {\n    self[m] = function () {\n      this._operations.push({ method: m, args: arguments })\n    }\n  })\n  self._iterator = function (options) {\n    var it = new DeferredIterator(self, options)\n    this._operations.push({ iterator: it })\n    return it\n  }\n}\n\nDeferredLevelDOWN.prototype._serializeKey = function (key) {\n  return key\n}\n\nDeferredLevelDOWN.prototype._serializeValue = function (value) {\n  return value\n}\n\nmodule.exports = DeferredLevelDOWN\nmodule.exports.DeferredIterator = DeferredIterator\n"],"mappings":"AAAA,IAAIA,iBAAiB,GAAGC,OAAO,CAAC,oBAAoB,CAAC,CAACD,iBAAiB;AACvE,IAAIE,QAAQ,GAAGD,OAAO,CAAC,UAAU,CAAC;AAClC,IAAIE,gBAAgB,GAAGF,OAAO,CAAC,qBAAqB,CAAC;AACrD,IAAIG,WAAW,GAAG,yBAAyB,CAACC,KAAK,CAAC,GAAG,CAAC;AACtD,IAAIC,mBAAmB,GAAG,8BAA8B,CAACD,KAAK,CAAC,GAAG,CAAC;AAEnE,SAASE,iBAAiBA,CAAEC,EAAE,EAAE;EAC9BR,iBAAiB,CAACS,IAAI,CAAC,IAAI,EAAED,EAAE,CAACE,QAAQ,IAAI,CAAC,CAAC,CAAC;;EAE/C;EACA;EACAJ,mBAAmB,CAACK,OAAO,CAAC,UAAUC,CAAC,EAAE;IACvC,IAAI,OAAOJ,EAAE,CAACI,CAAC,CAAC,KAAK,UAAU,IAAI,CAAC,IAAI,CAACF,QAAQ,CAACG,iBAAiB,CAACD,CAAC,CAAC,EAAE;MACtE,IAAI,CAACF,QAAQ,CAACG,iBAAiB,CAACD,CAAC,CAAC,GAAG,IAAI;IAC3C;EACF,CAAC,EAAE,IAAI,CAAC;EAER,IAAI,CAACE,GAAG,GAAGN,EAAE;EACb,IAAI,CAACO,WAAW,GAAG,EAAE;EACrBC,MAAM,CAAC,IAAI,CAAC;AACd;AAEAd,QAAQ,CAACK,iBAAiB,EAAEP,iBAAiB,CAAC;AAE9CO,iBAAiB,CAACU,SAAS,CAACC,IAAI,GAAG,oBAAoB;AAEvDX,iBAAiB,CAACU,SAAS,CAACE,KAAK,GAAG,UAAUC,OAAO,EAAEC,QAAQ,EAAE;EAC/D,IAAIC,IAAI,GAAG,IAAI;EAEf,IAAI,CAACR,GAAG,CAACS,IAAI,CAACH,OAAO,EAAE,UAAUI,GAAG,EAAE;IACpC,IAAIA,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;IAE7BF,IAAI,CAACP,WAAW,CAACJ,OAAO,CAAC,UAAUc,EAAE,EAAE;MACrC,IAAIA,EAAE,CAACC,QAAQ,EAAE;QACfD,EAAE,CAACC,QAAQ,CAACC,KAAK,CAACL,IAAI,CAACR,GAAG,CAAC;MAC7B,CAAC,MAAM;QACLQ,IAAI,CAACR,GAAG,CAACW,EAAE,CAACG,MAAM,CAAC,CAACC,KAAK,CAACP,IAAI,CAACR,GAAG,EAAEW,EAAE,CAACK,IAAI,CAAC;MAC9C;IACF,CAAC,CAAC;IACFR,IAAI,CAACP,WAAW,GAAG,EAAE;IAErBQ,IAAI,CAACD,IAAI,CAAC;IACVD,QAAQ,CAAC,CAAC;EACZ,CAAC,CAAC;AACJ,CAAC;AAEDd,iBAAiB,CAACU,SAAS,CAACc,MAAM,GAAG,UAAUV,QAAQ,EAAE;EACvD,IAAIC,IAAI,GAAG,IAAI;EAEf,IAAI,CAACR,GAAG,CAACkB,KAAK,CAAC,UAAUR,GAAG,EAAE;IAC5B,IAAIA,GAAG,EAAE,OAAOH,QAAQ,CAACG,GAAG,CAAC;IAC7BR,MAAM,CAACM,IAAI,CAAC;IACZD,QAAQ,CAAC,CAAC;EACZ,CAAC,CAAC;AACJ,CAAC;AAED,SAASE,IAAIA,CAAED,IAAI,EAAE;EACnBlB,WAAW,CAAC6B,MAAM,CAAC,UAAU,CAAC,CAACtB,OAAO,CAAC,UAAUC,CAAC,EAAE;IAClDU,IAAI,CAAC,GAAG,GAAGV,CAAC,CAAC,GAAG,YAAY;MAC1B,OAAO,IAAI,CAACE,GAAG,CAACF,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAI,CAACf,GAAG,EAAEoB,SAAS,CAAC;IAC/C,CAAC;EACH,CAAC,CAAC;EACFC,MAAM,CAACC,IAAI,CAACd,IAAI,CAACZ,QAAQ,CAACG,iBAAiB,CAAC,CAACF,OAAO,CAAC,UAAUC,CAAC,EAAE;IAChEU,IAAI,CAACV,CAAC,CAAC,GAAG,YAAY;MACpB,OAAO,IAAI,CAACE,GAAG,CAACF,CAAC,CAAC,CAACiB,KAAK,CAAC,IAAI,CAACf,GAAG,EAAEoB,SAAS,CAAC;IAC/C,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,SAASlB,MAAMA,CAAEM,IAAI,EAAE;EACrBlB,WAAW,CAACO,OAAO,CAAC,UAAUC,CAAC,EAAE;IAC/BU,IAAI,CAAC,GAAG,GAAGV,CAAC,CAAC,GAAG,YAAY;MAC1B,IAAI,CAACG,WAAW,CAACsB,IAAI,CAAC;QAAET,MAAM,EAAEhB,CAAC;QAAEkB,IAAI,EAAEI;MAAU,CAAC,CAAC;IACvD,CAAC;EACH,CAAC,CAAC;EACFC,MAAM,CAACC,IAAI,CAACd,IAAI,CAACZ,QAAQ,CAACG,iBAAiB,CAAC,CAACF,OAAO,CAAC,UAAUC,CAAC,EAAE;IAChEU,IAAI,CAACV,CAAC,CAAC,GAAG,YAAY;MACpB,IAAI,CAACG,WAAW,CAACsB,IAAI,CAAC;QAAET,MAAM,EAAEhB,CAAC;QAAEkB,IAAI,EAAEI;MAAU,CAAC,CAAC;IACvD,CAAC;EACH,CAAC,CAAC;EACFZ,IAAI,CAACgB,SAAS,GAAG,UAAUlB,OAAO,EAAE;IAClC,IAAImB,EAAE,GAAG,IAAIpC,gBAAgB,CAACmB,IAAI,EAAEF,OAAO,CAAC;IAC5C,IAAI,CAACL,WAAW,CAACsB,IAAI,CAAC;MAAEX,QAAQ,EAAEa;IAAG,CAAC,CAAC;IACvC,OAAOA,EAAE;EACX,CAAC;AACH;AAEAhC,iBAAiB,CAACU,SAAS,CAACuB,aAAa,GAAG,UAAUC,GAAG,EAAE;EACzD,OAAOA,GAAG;AACZ,CAAC;AAEDlC,iBAAiB,CAACU,SAAS,CAACyB,eAAe,GAAG,UAAUC,KAAK,EAAE;EAC7D,OAAOA,KAAK;AACd,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAGtC,iBAAiB;AAClCqC,MAAM,CAACC,OAAO,CAAC1C,gBAAgB,GAAGA,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}