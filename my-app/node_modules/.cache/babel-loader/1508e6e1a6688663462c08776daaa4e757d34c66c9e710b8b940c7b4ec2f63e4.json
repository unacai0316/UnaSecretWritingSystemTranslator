{"ast":null,"code":"'use strict';\n\nmodule.exports = function clear(db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db._nextTick(callback);\n  var transaction = db.db.transaction([location], 'readwrite');\n  var store = transaction.objectStore(location);\n  var count = 0;\n  transaction.oncomplete = function () {\n    callback();\n  };\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'));\n  };\n\n  // A key cursor is faster (skips reading values) but not supported by IE\n  var method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor';\n  var direction = options.reverse ? 'prev' : 'next';\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    var cursor = ev.target.result;\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue();\n        }\n      };\n    }\n  };\n};","map":{"version":3,"names":["module","exports","clear","db","location","keyRange","options","callback","limit","_nextTick","transaction","store","objectStore","count","oncomplete","onabort","error","Error","method","openKeyCursor","direction","reverse","onsuccess","ev","cursor","target","result","delete","key","continue"],"sources":["/Users/tsaiyunzhen/my-react-app/my-app/node_modules/level-js/util/clear.js"],"sourcesContent":["'use strict'\n\nmodule.exports = function clear (db, location, keyRange, options, callback) {\n  if (options.limit === 0) return db._nextTick(callback)\n\n  var transaction = db.db.transaction([location], 'readwrite')\n  var store = transaction.objectStore(location)\n  var count = 0\n\n  transaction.oncomplete = function () {\n    callback()\n  }\n\n  transaction.onabort = function () {\n    callback(transaction.error || new Error('aborted by user'))\n  }\n\n  // A key cursor is faster (skips reading values) but not supported by IE\n  var method = store.openKeyCursor ? 'openKeyCursor' : 'openCursor'\n  var direction = options.reverse ? 'prev' : 'next'\n\n  store[method](keyRange, direction).onsuccess = function (ev) {\n    var cursor = ev.target.result\n\n    if (cursor) {\n      // Wait for a request to complete before continuing, saving CPU.\n      store.delete(cursor.key).onsuccess = function () {\n        if (options.limit <= 0 || ++count < options.limit) {\n          cursor.continue()\n        }\n      }\n    }\n  }\n}\n"],"mappings":"AAAA,YAAY;;AAEZA,MAAM,CAACC,OAAO,GAAG,SAASC,KAAKA,CAAEC,EAAE,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,QAAQ,EAAE;EAC1E,IAAID,OAAO,CAACE,KAAK,KAAK,CAAC,EAAE,OAAOL,EAAE,CAACM,SAAS,CAACF,QAAQ,CAAC;EAEtD,IAAIG,WAAW,GAAGP,EAAE,CAACA,EAAE,CAACO,WAAW,CAAC,CAACN,QAAQ,CAAC,EAAE,WAAW,CAAC;EAC5D,IAAIO,KAAK,GAAGD,WAAW,CAACE,WAAW,CAACR,QAAQ,CAAC;EAC7C,IAAIS,KAAK,GAAG,CAAC;EAEbH,WAAW,CAACI,UAAU,GAAG,YAAY;IACnCP,QAAQ,CAAC,CAAC;EACZ,CAAC;EAEDG,WAAW,CAACK,OAAO,GAAG,YAAY;IAChCR,QAAQ,CAACG,WAAW,CAACM,KAAK,IAAI,IAAIC,KAAK,CAAC,iBAAiB,CAAC,CAAC;EAC7D,CAAC;;EAED;EACA,IAAIC,MAAM,GAAGP,KAAK,CAACQ,aAAa,GAAG,eAAe,GAAG,YAAY;EACjE,IAAIC,SAAS,GAAGd,OAAO,CAACe,OAAO,GAAG,MAAM,GAAG,MAAM;EAEjDV,KAAK,CAACO,MAAM,CAAC,CAACb,QAAQ,EAAEe,SAAS,CAAC,CAACE,SAAS,GAAG,UAAUC,EAAE,EAAE;IAC3D,IAAIC,MAAM,GAAGD,EAAE,CAACE,MAAM,CAACC,MAAM;IAE7B,IAAIF,MAAM,EAAE;MACV;MACAb,KAAK,CAACgB,MAAM,CAACH,MAAM,CAACI,GAAG,CAAC,CAACN,SAAS,GAAG,YAAY;QAC/C,IAAIhB,OAAO,CAACE,KAAK,IAAI,CAAC,IAAI,EAAEK,KAAK,GAAGP,OAAO,CAACE,KAAK,EAAE;UACjDgB,MAAM,CAACK,QAAQ,CAAC,CAAC;QACnB;MACF,CAAC;IACH;EACF,CAAC;AACH,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}